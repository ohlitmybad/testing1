<!DOCTYPE html>
<html>
<head>
    <title>Zoom Reset Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 100px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .zoom-level {
            margin-top: 20px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <h1>Hello World</h1>
    <p>Zoom your browser using Ctrl/Cmd + or Ctrl/Cmd -, then try the reset button</p>
    <button id="resetZoomButton">Reset Zoom to 100%</button>
    <div class="zoom-level">Current zoom level: <span id="currentZoom">100%</span></div>

    <script>
        // Function to update displayed zoom level
        function updateZoomDisplay() {
            // This approximation works in some browsers
            const zoomLevel = Math.round(window.outerWidth / window.innerWidth * 100);
            document.getElementById('currentZoom').textContent = zoomLevel + '%';
        }

        // Update zoom display on load and resize
        window.addEventListener('load', updateZoomDisplay);
        window.addEventListener('resize', updateZoomDisplay);

        // Reset zoom button click handler
        document.getElementById('resetZoomButton').addEventListener('click', function() {
            // Method 1: Using CSS zoom property (WebKit/Blink browsers)
            document.body.style.zoom = "100%";
            
            // Method 2: Using transform (more standard approach)
            document.body.style.transform = "scale(1)";
            document.body.style.transformOrigin = "top left";
            
            // Method 3: Force with !important style
            const zoomResetStyle = document.createElement('style');
            zoomResetStyle.textContent = `
                body, html {
                    zoom: 1 !important;
                    -webkit-text-size-adjust: 100% !important;
                    -moz-text-size-adjust: 100% !important;
                    text-size-adjust: 100% !important;
                }
            `;
            document.head.appendChild(zoomResetStyle);
            
            // Method 4: Using viewport meta tag
            const viewportMeta = document.querySelector('meta[name="viewport"]');
            if (viewportMeta) {
                viewportMeta.setAttribute('content', 'width=device-width, initial-scale=1, maximum-scale=1');
                
                // Reset it back after a moment
                setTimeout(() => {
                    viewportMeta.setAttribute('content', 'width=device-width, initial-scale=1, user-scalable=yes');
                }, 500);
            }
            
            // Method 5: For Chrome and some others, try keyboard event simulation (Ctrl+0)
            try {
                // Create and dispatch keyboard event
                const keyEvent = new KeyboardEvent('keydown', {
                    key: '0',
                    code: 'Digit0',
                    ctrlKey: true,
                    bubbles: true,
                    cancelable: true
                });
                document.dispatchEvent(keyEvent);
            } catch (e) {
                console.error("Error simulating keyboard shortcut", e);
            }
            
            // Method 6: Safari-specific approach with window.innerWidth
            if (navigator.userAgent.indexOf('Safari') !== -1) {
                try {
                    window.resizeTo(window.screen.availWidth, window.screen.availHeight);
                } catch (e) {
                    console.log("Cannot resize window:", e);
                }
            }
            
            // Method 7: Try to use the browser's reset zoom command
            try {
                if (document.execCommand) {
                    document.execCommand('ReFresh', false, null);
                }
            } catch (e) {
                console.log("execCommand not supported:", e);
            }
            
            // Update zoom display after a moment
            setTimeout(updateZoomDisplay, 100);
            
            alert("Attempted to reset zoom using multiple methods. Did it work?");
            
            // Clean up
            setTimeout(() => {
                if (zoomResetStyle && zoomResetStyle.parentNode) {
                    zoomResetStyle.parentNode.removeChild(zoomResetStyle);
                }
            }, 1000);
        });
    </script>
</body>
</html>

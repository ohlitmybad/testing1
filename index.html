<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.535, user-scalable=no"">
	<meta name="robots" content="noindex">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


<style>

#fullcontainer {
	            max-height: 78.4vh; /* Adjust the height based on your content */
            overflow-y: auto; /* Enable vertical scrolling for metrics */
        }
        @media only screen and (max-width: 767px) {
    /* Apply styles for screens smaller than 768px (typical mobile devices) */
    #fullcontainer {
        max-height: 79.5vh; /* Adjusted height for mobile */

    }
} 
 

.spinner {
  display: none;
  position: absolute;
   left: 521px;
   top: 88.926172px;
  transform: translate(-50%, -50%);
  z-index: 9999;
}

.spinner .spinner-icon {
  border: 8px solid transparent;
  border-top-color: #ff5733;
  border-radius: 50%;
  width: 42.5px;
  height: 42.5px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


.toggle-button {
  position: absolute;
  left: 520.8px;
  top: 19.7px;
  width: 20px; /* Set width */
}

/* Hide the default checkbox */
.toggle-button input[type="checkbox"] {
  opacity: 0;
  width: 0;
  height: 0;
}

/* Style the custom checkbox */
.toggle-button label {
  display: inline-block;
  width: 20px; /* Set width */
  height: 20px; /* Set height */
  background-color: #ccc;
  border-radius: 50%; /* Make it round */
  cursor: pointer;
  position: absolute;
}

/* Style the checked state of the custom checkbox */
.toggle-button input[type="checkbox"]:checked + label {
  background-color: #2196F3;
}

/* Style the slider inside the custom checkbox */
.toggle-button label::before {
  content: "";
  position: absolute;
  width: 12px; /* Set width of the slider */
  height: 12px; /* Set height of the slider */
  background-color: white;
  border-radius: 50%; /* Make it round */
  left: 20%; /* Adjust position */
  top: 20%; /* Adjust position */
  transition: transform 0.3s ease;
}

/* Style the slider when checkbox is checked */
.toggle-button input[type="checkbox"]:checked + label::before {
  transform:scale(0.88)
}


/* Style for the select element */
.select-style {
height: 27.8px;
width: 215px;
cursor: pointer;

}

.select-age {
height: 27.8px;
cursor: pointer;

}

.search-bar {
  top: 0px;
  width: 215px;
  height: 22px;
}

.combo-box {
  position: relative;
  display: inline-block;

}


.custom-dropdown {
  position: absolute;
  top: 19.8%;
  left: 92%;
  width: 6.1%;
  border-top: none;
}

/* Media query for screens smaller than 768px (typical mobile devices) */
@media screen and (max-width: 767px) {
  .custom-dropdown {
    position: absolute;
  top: 19.8%;
  left: 86.6%;
  width: 10.2%;
  border-top: none;
} }




.custom-dropdown select {
  width: 100%;
  border: none;
  font-size: 12px;
  border-radius: 0;
  height: 14.5px;
  cursor: pointer;


}





    .rank-bar {
      background-color: rgb(213, 213, 213);
      cursor: pointer;
      border: 1px solid #fff;
      border-radius: 20px;
      height: 17.1px;
      width: 546px;
      margin-bottom: 5px;
      position: relative;
    }
  
    .rank-bar-fill {
      background-color: rgba(0, 110, 255, 0.75);
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      border-radius: 20px;
    }

    html {
    overflow: scroll;
}
::-webkit-scrollbar {
    width: 0;  /* Remove scrollbar space */
    background: transparent;  /* Optional: just make scrollbar invisible */
}
@media only screen and (pointer: coarse) and (hover: none) {
    body {
        zoom: 119.2%;
    }
}
	
    body {
    font-family: Arial, Helvetica, sans-serif; /* Use Font1 as the primary font */
    font-size: 14.7px;
    color: #000000c4;
    scrollbar-width: none; /* Firefox */
    margin-left: 17.5px;
    margin-top:0.2px;
        background: #fff;
}

h2, h3 {
    font-family: Arial, Helvetica, sans-serif; /* Use Font2 for headings */
    font-size: 22.5px;
    margin-bottom: -8px;
}

h1 {
    font-family: Arial, Helvetica, sans-serif; /* Use Font2 for headings */
    font-size: 16.5px;
    color: #656464ef;
    font-weight: normal !important;
    margin-bottom: 10.5px;
}

.logo-image {
    width: 42px; /* Example width */
   position:absolute;
   left: 500px;
   top: 68px;
}
.logo-image2 {
    width: 42px; /* Example width */
   position:absolute;
   left: 500px;
   top: 68px;
}

.toggleSortingButton {
  position: absolute;
  left: 545.8px;
  top: 19.7px;
  width: 20px; /* Set width */
}

/* Hide the default checkbox */
.toggleSortingButton input[type="checkbox"] {
  opacity: 0;
  width: 0;
  height: 0;
}

/* Style the custom checkbox */
.toggleSortingButton label {
  display: inline-block;
  width: 20px; /* Set width */
  height: 20px; /* Set height */
  background-color: #ccc;
  border-radius: 50%; /* Make it round */
  cursor: pointer;
  position: absolute;
}

/* Style the checked state of the custom checkbox */
.toggleSortingButton input[type="checkbox"]:checked + label {
  background-color: #8be31e;
}

/* Style the slider inside the custom checkbox */
.toggleSortingButton label::before {
  content: "";
  position: absolute;
  width: 12px; /* Set width of the slider */
  height: 12px; /* Set height of the slider */
  background-color: white;
  border-radius: 50%; /* Make it round */
  left: 20%; /* Adjust position */
  top: 20%; /* Adjust position */
  transition: transform 0.3s ease;
}

/* Style the slider when checkbox is checked */
.toggleSortingButton input[type="checkbox"]:checked + label::before {
  transform: scale(0.88);
}

/* Existing CSS for toggleSortingButton */
.toggle-button:hover::after {
  content: attr(data-hover); /* Text to display */
  position: absolute;
  top: 26px; /* Adjust as needed */
  left: -30px;
  background-color: rgba(0, 0, 0, 0.7); /* Semi-transparent black background */
  color: #fff; /* Text color */
  padding: 4px 8px; /* Padding around the text */
  border-radius: 5px; /* Rounded corners */
  font-size: 10px; /* Adjust font size as needed */
  white-space: nowrap; /* Prevent line breaks */
  z-index: 1000;

}

/* Existing CSS for toggleMetricsButton */
.toggleSortingButton:hover::after {
  content: attr(data-hover);
  position: absolute;
  top: 26px; /* Adjust as needed */
  left: -40px;
  background-color: rgba(0, 0, 0, 0.7); /* Semi-transparent black background */
  color: #fff; /* Text color */
  padding: 4px 8px; /* Padding around the text */
  border-radius: 5px; /* Rounded corners */
  font-size: 10px; /* Adjust font size as needed */
  white-space: nowrap; /* Prevent line breaks */
  z-index: 1000;

}

/* Existing CSS for toggleMetricsButton */
.toggleButton2:hover::after {
  content: "Bars / Chart"; /* Text to display */
  position: absolute;
  top: 26px; /* Adjust as needed */
  left: -40px;
  background-color: rgba(0, 0, 0, 0.7); /* Semi-transparent black background */
  color: #fff; /* Text color */
  padding: 4px 8px; /* Padding around the text */
  border-radius: 5px; /* Rounded corners */
  font-size: 10px; /* Adjust font size as needed */
  white-space: nowrap; /* Prevent line breaks */
  z-index: 1000;
}


.hover-content {
    position: absolute;
    top: -3.5px; /* Adjust the top value according to your preference */
    left: 95.9%;
    color: #000000;
    transform: translateX(-50%);
    display: none;
    padding: 4px 8px;
    z-index: 1000;
}

.rank-bar:hover .hover-content,
    .rank-bar.active .hover-content {
      display: block;
    }

    #chartContainer {
    width: 550px;  /* Set the desired width of the container */
    height: 550px; /* Set the desired height of the container */
    position: relative;
}

#pizzaChart {
    width: 100%;
    height: 100%;
}

.rank-bar {
    position: relative;
    z-index: 1; /* Ensure it's below the chart */
}



.dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 250px;
        max-height: 300px;
        overflow-y: auto;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
        padding: 10px;
    }

    .dropdown-content label {
        display: block;
        padding: 5px;
    }

    .dropdown-content input[type="checkbox"] {
        margin-right: 10px;
    }

    .dropdown .dropbtn {
        background-color: #fefefe;
        color: rgb(0, 0, 0);
        border: none;
        padding: 10px;
        font-size: 16px;
        cursor: pointer;
    }



    .dropdown.show .dropdown-content {
        display: block;
    }

.loading-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.9);
  z-index: 9998;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.loading-text {
  font-size: 24px;
  margin-bottom: 20px;
  color: #333;
}

.loading-bar {
  width: 300px;
  height: 10px;
  background: #eee;
  border-radius: 5px;
  overflow: hidden;
}

.loading-progress {
  width: 0%;
  height: 100%;
  background: #2196F3;
  border-radius: 5px;
  animation: progress 2s ease-in-out infinite;
}

@keyframes progress {
  0% {
    width: 0%;
  }
  50% {
    width: 100%;
  }
  100% {
    width: 0%;
  }
}

    body.dark-mode #SFctr {
        color: #ffffff !important
        }
        
        
        #SFctr input {
            background-color: #ffffff !important;
        color:#000000 !important;
        border: 1px solid #c2c2c2 !important
        }

#SFctr {
	font-family: Arial, Helvetica, sans-serif !important;
	color: #000000 !important;
  margin-left: 4px;
}

#SFusrlogpst strong:first-child {
  font-size: 0px;
}

#SFusrlogpst input[type="checkbox"],
#SFusrlogpwd input[type="checkbox"],
#SFusrlogpst i,
#SFusrlogpwd i {
  display: none !important;
}

#SFctr .SFfrm input[type="text"],
#SFctr .SFfrm input[type="password"],
#SFctr .SFfrm button {
  border-radius: 6px;
}

#SFusrlogpwd strong {
  visibility: hidden; /* Hide the original text */
  position: relative;
}

#SFusrlogpwd strong::after {
  content: "Forgot Password?"; /* Add the new text */
  visibility: visible;
  position: absolute;
  font-size: 12px;
  font-weight: 400;
  left: 80px;
  white-space: nowrap; /* Prevent text from wrapping */
  top: -15px;
}
	
.membershipworksplaceholder{
  height: 15px;
}
	
  </style>
</head>

<body>
		<div class="loading-container" id="loadingContainer">
  <div class="loading-text" data-i18n="loading">Loading data...</div>
  <div class="loading-bar">
    <div class="loading-progress"></div>
  </div>
</div>
<div id="membershipworksPlaceholder" class="membershipworksplaceholder"></div>
    <div class="spinner" id="spinner">
  <div class="spinner-icon"></div>
</div>
  <div class="combo-box">
    <input type="text" id="searchInput" class="search-bar" placeholder="Search for a player..." data-i18n="search.placeholder">    <div class="custom-dropdown">
      <select id="playerSelect" class="search-bar">
        <option value="" disabled selected></option>
        <!-- Options will be dynamically added here -->
      </select>
    </div>
  </div>
  
  
  <select id="sectionSelect" class="select-style">
  </select>
  

  
    <select id="ageSelect" class="select-age">
      <option value="" data-i18n="age.all">Age</option>
        <option value="17">U17</option>
        <option value="18">U18</option>
        <option value="19">U19</option>
        <option value="20">U20</option>
        <option value="21">U21</option>
        <option value="22">U22</option>
        <option value="23">U23</option>
        <option value="24">U24</option>
        <option value="25">U25</option>
        <option value="26">U26</option>
        <option value="27">U27</option>
        <option value="28">U28</option>
        <option value="29">U29</option>
        <option value="30">U30</option>
        <option value="35">U35</option>
        <!-- Add more age options as needed -->
    </select>
    <div class="toggle-button">
      <input type="checkbox" id="toggleMetrics" checked> <!-- Add checked attribute here -->
        <label for="toggleMetrics"></label>
    </div>
    <div class="toggleSortingButton">
      <input type="checkbox" id="toggleSortingButton" checked> <!-- Add checked attribute here if needed -->
      <label for="toggleSortingButton"></label>
    </div>
    <div id="chartTitle"></div>
    <div id="fullcontainer">
        <div id="chartButton"></div>
    <div id="chartContainer">
        <canvas id="pizzaChart"></canvas>
    </div>
    <div id="results"></div></div>
    <script src="main.js"></script>

<script>
// Set default hover content immediately when DOM loads
document.addEventListener('DOMContentLoaded', function() {
  const toggleButton = document.querySelector('.toggle-button');
  const toggleSortingButton = document.querySelector('.toggleSortingButton');
  
  // Set default English values
  toggleButton.setAttribute('data-hover', 'Per 90 : Yes / No');
  toggleSortingButton.setAttribute('data-hover', 'Ascending : Yes / No');
});

function setHoverContent() {
  const toggleButton = document.querySelector('.toggle-button');
  const toggleSortingButton = document.querySelector('.toggleSortingButton');

  if (currentTranslations && currentTranslations.hover) {
    toggleButton.setAttribute('data-hover', currentTranslations.hover.per90);
    toggleSortingButton.setAttribute('data-hover', currentTranslations.hover.ascending);
  }
}

function translateLeague(league) {
  if (!currentTranslations || !currentTranslations.leagues) return league;
  // Handle special cases
  if (league === "All Leagues") return currentTranslations.leagues.all;
  
  const key = league.toLowerCase().replace(/\s+/g, '');
  return currentTranslations.leagues[key] || league;
}

function translatePosition(position) {
  if (!currentTranslations || !currentTranslations.positions) return position;
  if (position === "Player") return currentTranslations.positions.all;
  const key = position.toLowerCase().replace(/[-\s]+/g, '');
  return currentTranslations.positions[key] || position;
}

function translateTitle(league, suffix, position, includePer90 = false) {
  if (!currentTranslations || !currentTranslations.player_comparison) {
    return "vs " + league + " " + suffix + " " + position +"s" + (includePer90 ? ", per 90" : "");
  }
  const template = currentTranslations.player_comparison.title;
  const translatedLeague = translateLeague(league);
  const translatedPosition = translatePosition(position);
  const per90Text = includePer90 ? (currentTranslations.player_comparison.per90 || ", per 90") : "";
  
  return template
    .replace('{league}', translatedLeague)
    .replace('{suffix}', suffix)
    .replace('{position}', translatedPosition) + per90Text;
}

let currentTranslations = null;

function translateMetricName(metricName) {
  if (currentTranslations && currentTranslations.metrics && currentTranslations.metrics[metricName]) {
    return currentTranslations.metrics[metricName];
  }
  return metricName;
}

function translateRankSuffix(suffix) {
  if (currentTranslations && currentTranslations.rankSuffixes && currentTranslations.rankSuffixes[suffix]) {
    return currentTranslations.rankSuffixes[suffix];
  }
  return suffix;
}

  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
          currentTranslations = translations;
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'OPTION') {
                element.text = value;
                element.textContent = value;
              } else if (element.tagName === 'META') {
                element.setAttribute('content', value);
              } else if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                element.setAttribute('placeholder', value);
              } else if (value.includes('<')) {
              element.innerHTML = value;
              } else {
                element.textContent = value;
              }
            }
            setHoverContent();

          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });

          // Handle metrics translation in text nodes
      if (translations.metrics) {
        const walker = document.createTreeWalker(
          document.body,
          NodeFilter.SHOW_TEXT,
          {
            acceptNode: function(node) {
              // Skip script and style tags
              if (node.parentNode.tagName === 'SCRIPT' || 
                  node.parentNode.tagName === 'STYLE') {
                return NodeFilter.FILTER_REJECT;
              }
              return NodeFilter.FILTER_ACCEPT;
            }
          },
          false
        );

        let node;
        while (node = walker.nextNode()) {
          let text = node.nodeValue;
          Object.entries(translations.metrics).forEach(([key, translation]) => {
            const regex = new RegExp(`\\b${key}\\b(?=\\s*[â€“-])`, 'g');
            text = text.replace(regex, translation);
          });
          node.nodeValue = text;
        }
      }

      // Trigger a re-render of the metrics if needed
      if (window.displaySelectedPlayer) {
        displaySelectedPlayer();
      }
    }
  
    window.translateMetricName = translateMetricName;
    window.translateRankSuffix = translateRankSuffix;
    const preferredLanguage = getPreferredLanguage();
    applyLanguage(preferredLanguage);
  

  </script>
<script>
  function loadMembershipworks() {
    const container = document.getElementById('membershipworksPlaceholder');
    document.body.style.visibility = "hidden";
    container.innerHTML = '<div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div>';
    const script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://cdn.membershipworks.com/mfl.js';
    document.body.appendChild(script);
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    const originalHideLoadingContainer = document.getElementById('loadingContainer').style.display;
        const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.target.style.display === 'none' && mutation.target.id === 'loadingContainer') {
          setTimeout(loadMembershipworks, 10);
          observer.disconnect();
        }
      });
    });
       observer.observe(document.getElementById('loadingContainer'), { 
      attributes: true,
      attributeFilter: ['style']
    });

  });
</script>
</body>
</html>
